# $OpenBSD: Makefile,v 1.21 2020/07/03 21:12:58 sthen Exp $

COMMENT =	Z3 theorem prover

VERSION =	4.8.8

GH_ACCOUNT =	Z3Prover
GH_PROJECT =	z3
GH_TAGNAME =	${GH_PROJECT}-${VERSION}

DISTNAME =	${GH_TAGNAME}
PKGNAME =	${DISTNAME:L}
REVISION =	0

SHARED_LIBS =	z3			2.1 # 4.8

CATEGORIES =	math

WANTLIB +=	c m pthread ${COMPILER_LIBCXX}

# MIT
PERMIT_PACKAGE =	Yes

# c++11
COMPILER =	base-clang ports-gcc

MODULES =	devel/cmake \
		lang/python

MODPY_VERSION =	${MODPY_DEFAULT_VERSION_3}

CONFIGURE_ARGS +=	-DZ3_ENABLE_EXAMPLE_TARGETS=ON \
			-DZ3_INCLUDE_GIT_HASH=OFF \
			-DZ3_INCLUDE_GIT_DESCRIBE=OFF \
			-DZ3_BUILD_PYTHON_BINDINGS=ON \
			-DZ3_USE_OPENMP=OFF \
			-DZ3_USE_LIB_GMP=OFF

WRKDIST =	${WRKDIR}/z3-${DISTNAME}

NO_TEST =	Yes

pre-configure:
	${SUBST_CMD} ${WRKSRC}/scripts/mk_util.py

.include <bsd.port.mk>
