$OpenBSD: patch-configure,v 1.19 2020/07/03 17:00:42 jca Exp $

Use ld -Z conditionally.

Use posix_openpt(3).
https://debbugs.gnu.org/cgi/bugreport.cgi?bug=42059

Index: configure
--- configure.orig
+++ configure
@@ -9263,9 +9263,7 @@ case "$opsys" in
    ;;
 
   openbsd)
-   ## Han Boetes <han@boetes.org> says this is necessary,
-   ## otherwise Emacs dumps core on elf systems.
-   LD_SWITCH_SYSTEM="-Z"
+   LD_SWITCH_SYSTEM="${EMACS_LD_SWITCH_SYSTEM}"
    ;;
 esac
 
@@ -18602,12 +18600,12 @@ case $opsys in
 
     ;;
 
-  gnu | openbsd | qnxnto )
+  gnu | qnxnto )
     $as_echo "#define FIRST_PTY_LETTER 'p'" >>confdefs.h
 
     ;;
 
-  gnu-linux | gnu-kfreebsd | dragonfly | freebsd | netbsd | darwin | nacl )
+  openbsd | gnu-linux | gnu-kfreebsd | dragonfly | freebsd | netbsd | darwin | nacl )
         if test "x$ac_cv_func_grantpt" = xyes; then
 
 $as_echo "#define UNIX98_PTYS 1" >>confdefs.h
